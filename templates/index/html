<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Song Generator â€” Rhymes with "render"</title>
  <style>
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial; background:#f7fafc; color:#111827; margin:0; padding:40px;}
    .card { max-width:760px; margin:0 auto; background:white; padding:28px; border-radius:12px; box-shadow:0 8px 30px rgba(2,6,23,0.08); }
    h1 { margin:0 0 10px 0; color:#0f766e; }
    p.lead { margin:0 0 20px 0; color:#334155; }
    button { background:#0f766e; color:white; border:0; padding:12px 18px; border-radius:8px; cursor:pointer; font-weight:600; }
    button:active { transform:translateY(1px); }
    .song { margin-top:20px; padding:18px; background:#f1f5f9; border-radius:8px; }
    .line { margin:8px 0; font-size:18px; }
    .chorus { margin-top:12px; font-style:italic; color:#065f46; }
    footer { margin-top:18px; color:#64748b; font-size:13px; }
  </style>
</head>
<body>
  <div class="card">
    <h1>Song generator â€” rhymes with "render"</h1>
    <p class="lead">Click the button to generate a short song. Every line will rhyme with <strong>render</strong>.</p>

    <button id="generate">Generate a song</button>

    <div id="song" class="song" aria-live="polite" style="display:none;">
      <div id="lines"></div>
      <div id="chorus" class="chorus"></div>
    </div>

    <footer>Tip: click again to get a brand new verse ðŸŽµ</footer>
  </div>

  <script>
    const btn = document.getElementById('generate');
    const songDiv = document.getElementById('song');
    const linesDiv = document.getElementById('lines');
    const chorusDiv = document.getElementById('chorus');

    async function fetchSong(){
      try {
        btn.disabled = true;
        btn.textContent = "Generating...";
        const resp = await fetch('/song');
        if (!resp.ok) throw new Error("Network response not ok");
        const data = await resp.json();
        // show
        linesDiv.innerHTML = '';
        data.lines.forEach(l => {
          const el = document.createElement('div');
          el.className = 'line';
          el.textContent = l;
          linesDiv.appendChild(el);
        });
        chorusDiv.textContent = data.chorus;
        songDiv.style.display = 'block';
      } catch (err) {
        linesDiv.innerHTML = '<div class="line">Oops â€” could not generate. Try again.</div>';
        songDiv.style.display = 'block';
        console.error(err);
      } finally {
        btn.disabled = false;
        btn.textContent = "Generate a song";
      }
    }

    btn.addEventListener('click', fetchSong);

    // Optional: auto-generate on page load
    // fetchSong();
  </script>
</body>
</html>
